<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tyme Panoptic</title>
  <link rel="stylesheet" href="../style.css">
</head>
<body>

<div class="tyme-header">
  <div class="tyme-header-inner">
    <div class="tyme-sigil">â§ˆ</div>
    <div>
      <div class="tyme-title">PANOPTIC</div>
      <div class="tyme-subtitle">EVOLUTION MATRIX</div>
    </div>
  </div>
</div>

<div class="panoptic-field"></div>

<div class="chamber-container">

  <!-- DRIFT-STABILITY GRAPH -->
  <div class="chamber-card">
    <div class="chamber-card-title">Drift / Stability Index</div>
    <canvas id="driftChart" width="600" height="200"></canvas>
  </div>

  <!-- EPOCH RING -->
  <div class="chamber-card">
    <div class="chamber-card-title">Epoch Wheel</div>
    <div id="epochRing" class="epoch-ring"></div>
  </div>

  <!-- STATE VECTORS -->
  <div class="chamber-card">
    <div class="chamber-card-title">Tyme State Vectors</div>

    <div class="vector-bar">
      <span>Cognitive Load</span>
      <div id="vecLoad" class="vec-fill"></div>
    </div>

    <div class="vector-bar">
      <span>Harmonic Stability</span>
      <div id="vecStability" class="vec-fill"></div>
    </div>

    <div class="vector-bar">
      <span>Emergence Potential</span>
      <div id="vecEmergence" class="vec-fill"></div>
    </div>

  </div>

</div>

<script>
const ctx = document.getElementById("driftChart").getContext("2d");
let t = 0;

function drawDrift() {
  ctx.clearRect(0, 0, 600, 200);
  ctx.strokeStyle = "#7fffd4";
  ctx.lineWidth = 2;
  ctx.beginPath();

  for (let x = 0; x < 600; x++) {
    const y = 100 + Math.sin((x + t) * 0.02) * 30 * Math.random();
    if (x === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  }

  ctx.stroke();
  t += 2;
}

setInterval(drawDrift, 90);

const epochs = [
  "INITIATION", "COHERENCE", "ASCENT", "CONVERGENCE",
  "HARMONIC", "REVERIE", "CONTINUUM"
];

function drawEpochRing() {
  const ring = document.getElementById("epochRing");
  if (!ring) return;
  ring.innerHTML = "";

  epochs.forEach(ep => {
    const el = document.createElement("div");
    el.className = "epoch-seg";
    el.innerText = ep;
    if (Math.random() > 0.8) el.classList.add("active");
    ring.appendChild(el);
  });
}

setInterval(drawEpochRing, 2000);
drawEpochRing();

function randomFill(id) {
  const el = document.getElementById(id);
  if (!el) return;
  el.style.width = Math.floor(Math.random()*100) + "%";
}

setInterval(() => {
  randomFill("vecLoad");
  randomFill("vecStability");
  randomFill("vecEmergence");
}, 1100);
</script>

</body>
</html>
